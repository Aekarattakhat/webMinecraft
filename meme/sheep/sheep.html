<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame Project</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
</head>
<body>
    <!-- A-Frame Scene -->
    <a-scene>
        <!-- Sky -->
        <a-sky src="/../res/sky.png" position="0 -20 0"></a-sky>
        <a-entity gltf-model="/../res/grass.glb" position="0.5 -1 -4.19736"></a-entity>

        
        <!-- Basic Shapes -->
        <a-entity gltf-model="sheepInBoat.glb" position="0.5 0 -4.19736"></a-entity>
        <a-entity gltf-model="pistionBase.glb" position="1.20165 0 -4.19736"></a-entity>
        <a-entity gltf-model="pistionShot.glb" id="piston"
                  position="1 0 -4.19736"  sound="src: url(out.wav); poolSize:5; loop:false;autoplay:false; on:animationbegin"
                  animation="property: position; to: 1.5 0 -4.19736; dur: 200; dir: alternate;autoplay:false;loop:1;startEvents:ani" >
                  
        </a-entity>

        <!-- หัวข้อ -->
        <a-entity troika-text="value:เครื่องจักรแห่งแกะ; 
         font-size: 0.5;
         color:white;
         outlineWidth: 0.05;
         outlineColor: black;
         anchor:center;
         max-width:6"
         position="0 4 -5">
        </a-entity>

        <!-- คำอธิบาย 1 -->
        <a-entity troika-text="value:แท่งยาวๆ กระบอกสูบ และแกะ; 
         font-size: 0.4;
         color:white;
         outlineWidth: 0.05;
         outlineColor: black;
         anchor:center;
         max-width:6"
         position="0 3 -5">
        </a-entity>


        <!-- Camera -->
        <a-camera position="0 1.6 0"></a-camera>
    </a-scene>

    <!-- ปุ่มให้ผู้ใช้คลิกเพื่อเริ่มเสียง -->
    <button id="startSound" style="position: fixed; top: 10px; left: 10px; padding: 10px;">เริ่มเสียง</button>

    <script>

        var c=1
        const piston = document.querySelector('#piston');
        setInterval(()=>{
            piston.emit('ani',null,false)
            console.log(c++)
        },600)
    </script>
</body>
</html>
